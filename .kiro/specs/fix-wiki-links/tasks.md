# Implementation Plan

- [x] 1. `/ai-wiki/make`コマンドのリンク生成ロジックを修正する
- [x] 1.1 `make.md`のリンク生成ステップを修正する
  - `.cursor/commands/ai-wiki/make.md`のStep 4の4番目のステップ（202-203行目）を特定する
  - リンク生成形式を`[${relatedPageTitle}](${relatedPageId}.md)`から`[${relatedPageTitle}](${relatedPageId})`に変更する
  - 変更が既存の処理フローに影響を与えないことを確認する
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 2. 既存のWikiページ内のリンクを一括修正する
- [x] 2.1 既存のWikiページファイルを検索して読み込む
  - `repo/{project-name}.wiki/`ディレクトリ内のすべての`.md`ファイルを検索する
  - 各ファイルを読み込んで内容を取得する
  - ファイルが存在しない場合はエラーメッセージを報告してスキップする
  - _Requirements: 2.1, 2.3_

- [x] 2.2 正規表現を使用してリンクから`.md`拡張子を除去する
  - Markdownリンク構文（`](...md)`）を検出する正規表現を作成する
  - 検出されたリンクから`.md`拡張子を除去する
  - ファイルの他の内容は変更しないことを確認する
  - 複数のリンクが存在する場合はすべて修正する
  - _Requirements: 2.1, 2.2, 2.3_

- [x] 2.3 修正後のページを元の場所に保存する
  - 修正後の内容を元のファイルパスに書き込む
  - ファイル書き込みに失敗した場合はエラーメッセージを報告する
  - 修正されたファイル数を記録する
  - _Requirements: 2.3_

- [x] 3. リンク形式の検証機能を実装する
- [x] 3.1 リンクが`.md`拡張子を含まないことを検証するロジックを実装する
  - 正規表現を使用して`.md`拡張子を含むリンクを検出する
  - 検出されたリンクをリストアップする
  - 検証結果を報告する
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 3.2 生成されたWikiページのリンク形式を検証する
  - `/ai-wiki/make`コマンドで生成されたWikiページのリンクを検証する
  - `.md`拡張子を含むリンクが存在する場合はエラーを報告する
  - 検証結果を記録する
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 3.3 既存ページの修正後のリンク形式を検証する
  - 修正後の既存ページのリンクを検証する
  - `.md`拡張子を含むリンクが残っていないことを確認する
  - 検証結果を報告する
  - _Requirements: 3.1, 3.2, 3.3_

